### 데이터베이스

- 데이터베이스 기본 용어
    - 일반적인 데이터베이스에서 행렬을 부르는 방식과, 관계형 데이터베이스에서 행렬을 부르는 방식이 각각 어떻게 되고 왜 그런 차이가 나타나는거죠?
        
        일반적인 데이터베이스에서는 테이블이라고 부르고, 관계형 데이터베이스에서는 릴레이션이라 부릅니다. 관계형 데이터베이스는 일반적인 데이터베이스의 부분 집합이기 때문에 모든 릴레이션은 테이블이지만, 그 역은 성립하지 않습니다. 
        
        이 차이는 릴레이션은 모든 값은 유일한 값을 가져야 한다는 조건때문에 나타납니다.
        
    - 관계형 데이터베이스에서의 행에 대해 설명해보세요
        
        일반적으로 튜플 또는 레코드라고 불립니다.
        
    - 관계형 데이터베이스에서의 열에 대해 설명해보세요
        
        일반적으로 속성이라고 불립니다.
        
    - 데이터베이스에서의 도메인에 대해 설명해보세요
        
        데이터베이스에서 필드에 채워질 수 있는 값의 집합입니다.
        
    - 데이터베이스에서의 스키마에 대해 설명해보세요
        
        데이터베이스의 구조를 전반적으로 기술한 것을 말합니다. 사용자의 관점에 따라 외부 스키마, 개념 스키마, 내부 스키마로 구분합니다.
        
- 키
    - 키의 종류에 대해 설명해보세요
        
        Candidate Key, Primary Key, Alternate Key, Super Key, Foreign Key가 있습니다.
        
    - Candidate Key란 무엇인가요?
        
        릴레이션을 구성하는 속성들 중에서 튜플을 유일하게 식별할 수 있는 속성들의 부분집합을 의미합니다.
        
        관계형 데이터베이스의 조건을 만족시키기 위해, 모든 릴레이션은 반드시 하나 이상의 후보 키를 가져야합니다. 또한 꼭 필요한 속성으로만 구성되어야 합니다.
        
        **유일성, 최소성 만족**
        
    - Primary Key란 무엇인가요?
        
        Candidate Key 중 선택한 Main Key를 의미합니다.
        
    - 개체 무결성의 조건과 관련지어 PK에 대해 설명해보세요
        
        NULL값을 가질 수 없고 중복되는 값이 불가능합니다.
        
        **유일성, 최소성, 개체 무결성 만족**
        
    - Alternate Key(보조키)란 무엇인가요?
        
        후보키가 둘 이상일 때, 기본 키를 제외한 나머지 후보키들을 말합니다.
        
    - Super Key란 무엇인가요?
        
        한 릴레이션 내에 있는 속성들의 집합으로 구성된 키입니다.
        
        **유일성 만족, 최소성 불만족**
        
    - Foreign Key란 무엇인가요?
        
        참조되는 릴레이션의 기본키와 대응되어 릴레이션 간에 참조 관계를 표현하는데 사용됩니다.
        
- SQL Injection
    - SQL Injection이란 무엇인가요?
        
        해커에 의해 조작된 SQL 쿼리문이 데이터베이스에 그대로 전달되어 비정상적인 명령을 실행시키는 공격 기법입니다.
        
    - 인증 우회에 대해 말해보세요
        
        입력을 할 때 조작된 SQL 쿼리문을 같이 보내는 것을 의미합니다.
        
        예시로 기본 쿼리문의 WHERE절에 OR문을 추가하여 ‘1’ = ‘1’과 같은 true문을 작성하여 무조건 적용되도록 수정한 후 DB를 조작하는 방법 등이 있습니다.
        
    - 데이터 노출에 대해 말해보세요
        
        시스템에서 발생하는 에러 메시지를 이용해 공격하는 방법입니다. 이를 통해 해당 웹앱 데이터베이스의 구조를 유추할 수 있습니다.
        
    - SQL Injection을 방어할 수 있는 방법에 대해 말해보세요
        
        우선 인증 우회를 막기 위해 input 값을 받을 때 검증 로직을 추가하여 특수 문자 여부를 검사하는 방법이 있습니다. 또는 prepared statement를 사용하면 특수문자를 자동으로 escaping 해줍니다.
        
        데이터 노출을 막기 위해서는 원본 데이터베이스 테이블의 접근 권한을 높여 일반 사용자는 view로만 접근해 에러를 볼 수 없게 만드는 방법이 있습니다.
        
- SQL Join
    - join이 무엇인가요?
        
        두 개 이상의 테이블이나 데이터베이스를 연결하여 데이터를 검색하는 방법을 말합니다.
        
    - inner join에 대해 설명해보세요
        
        교집합입니다.
        
        ```sql
        select a.name, b.age 
        from a_table a 
        inner join b_table b on a.no_emp = b.no_emp
        ```
        
    - left outer join에 대해 설명해보세요
        
        기준 테이블 + 교집합입니다.
        
    - right outer join에 대해 설명해보세요
        
        그 반대입니다.
        
    - full outer join
    - cross join
        
        모든 경우의 수를 전부 표현해주는 방식으로, 결과값은 (A의 ROW*B의 ROW)입니다. 
        
    - self join
        
        자기 자신과 조인합니다. 주로 자신이 가지고 있는 컬럼을 다양하게 변화시켜 활용할 경우에 사용합니다.
        
- SQL vs NOSQL
    - NOSQL과 비교되는 SQL의 핵심적인 특징들을 말해보세요
        
        정해진 데이터 스키마가 존재하고, 관계를 통해 여러 테이블에 분산됩니다.
        
    - NOSQL의 장단점을 말해보세요
        
        NOSQL은 데이터를 애플리케이션이 필요로 하는 형식으로 저장하기 때문에 데이터를 읽어오는 속도가 빠르지만 데이터가 여러 컬렉션에 중복되어 있기 때문에 수정시 모든 컬렉션에서 수행해야 한다는 단점이 있습니다.
        
    - NOSQL에서는 데이터를 어떻게 적재하는지 말해보세요
        
        관련 데이터를 동일한 컬렉션에 넣습니다.
        
    - JOIN을 NOSQL에서 사용하기 위해서는 어떻게 해야 합니까?
        
        컬렉션을 통해 데이터를 복제하여 각 컬렉션 일부분에 속하는 데이터를 정확하게 산출해야 합니다. 하지만 이러면 데이터가 중복되어 서로 영향을 줄 위험이 있습니다. 따라서 NOSQL은 조인을 잘 사용하지 않고 자주 변경되지 않는 데이터일 때 유리합니다.
        
    - SQL과 NOSQL을 데이터베이스 확장성 측면에서 비교해주세요
        
        SQL은 일반적으로 수직적 확장만 지원합니다. 수평적 확장은 NOSQL 에서만 가능합니다.
        
- 이상
    - SQL에서는 정규화를 수행한다고 하였는데, 정규화가 왜 필요한건가요?
        
        잘못된 테이블 설계로 인해 이상 현상이 나타날 수 있습니다
        
    - 이상 현상의 예시로는 무엇이 있나요?
        
        불필요한 데이터를 추가해야 삽입할 수 있는 상황, 일부만 변경하여 데이터가 불일치하는 모순의 상황, 튜플 삭제로 인해 꼭 필요한 데이터까지 함께 삭제가되는 상황이 있습니다.
        
- 인덱스
    - 인덱스는 왜, 어디에서 사용하나요?
        
        검색 속도를 높이기 위해 RDBMS에서 사용합니다.
        
    - 어떤 과정을 통해 검색 속도를 높일 수 있나요?
        
        해당 테이블의 컬럼을 따로 트리 구조로 색인화해 검색시 인덱스 파일을 검색하여 검색 속도를 빠르게 합니다.
        
        자주 사용하는 트리 구조로는 균형 탐색 트리가 있습니다.
        
    - 색인화 하는 과정을 좀 더 자세히 말해주세요
        
        인덱스를 해당 컬럼에 주게 되면 초기 테이블 생성시 FRM, MYD, MYI 3개의 파일이 만들어집니다. 
        
        FRM은 테이블 구조가 들어있는 파일이고 MYD는 실제 데이터가 있는 파일, MYI는 인덱스 정보가 들어있는 파일입니다.(인덱스를 사용하지 않을 경우 MYI 파일은 비어져 있습니다.)
        
    - PK와 인덱스의 차이에 대해 말해주세요
        
        테이블의 PK는 자동으로 인덱스됩니다.
        
    - 인덱스의 단점에 대해 말해주세요
        
        인덱스된 필드에서 레코드를 업데이트, 추가, 삭제할 때 성능이 떨어집니다. 또한 데이터 변경 작업이 자주 일어날 경우 인덱스를 재작성해야 할 필요가 있기에 성능에 영향을 끼칠 수 있습니다.
        
        예시로 인덱스를 추가하면 쿼리 속도 1초 정도 빨라지지만, 데이터 행을 추가하는 속도는 2초 정도 느려지게 되어 여러 사용자가 사용하는 경우 레코드 잠금 문제가 발생할 수 있습니다. 따라서 concurrency가 줄어든다고 할 수 있습니다.
        
    - 지금까지 얘기한 인덱스의 장점과 단점을 활용해 인덱스의 성능을 쿼리와 연결지어 요약해주세요
        
        select 쿼리의 where 절이나 join 예약어를 사용했을 때만 인덱스를 사용하며, select쿼리를 사용했을 때 성능이 증가합니다.
        
        이를 반대로 말하면 delete, insert, update 시에는 index 사용이 유리하지 않다는 것을 의미합니다.
        
    - 왜 인덱스는 insert 쿼리에 불리한가요?
        
        index split이 발생하여 불리합니다. index split이란 인덱스는 데이터가 순서대로 정렬되어야 한다는 조건에 의해 insert 하려는 블록에 여유가 없는 경우, 인덱스의 consistency를 위해 블록을 나눠 인덱스를 옮기는 복잡한 작업을 수행합니다. 이때 index split이 이루어지는 동안 해당 블록에 대해 인덱스 값이 변경되면 안되므로 DML이 블로킹되기 때문에 심각한 성능 저하가 발생합니다.
        
    - 왜 인덱스는 delete 쿼리에 불리한가요?
        
        테이블과 인덱스에서 delete 연산의 작동 결과가 다르기 때문입니다. 테이블과 달리 인덱스에서 데이터가 delete 될 경우, 데이터가 지워지지 않고 사용 안됨 표시만 됩니다.
        
    - 왜 인덱스는 update 쿼리에 불리한가요?
        
        인덱스에는 update라는 개념이 없습니다. 따라서 이를 수행하기 위해 인덱스에서는 delete가 먼저 발생한 후 insert 가 발생합니다. 즉 두개의 작업이 필요하기에 다른 DML보다 더 큰 부하를 주게 됩니다.
        
- 트랜잭션
    - 트랜잭션이란 무엇인가요?
        
        데이터베이스의 상태를 변화시키기 위해 수행하는 작업의 단위입니다. 이때 상태를 변화시킨다는 것은 1개 이상의 select, insert 등의 SQL 질의어를 통해 DB에 접근하는 것입니다.
        
        - 트랜잭션 설계를 잘 만드는 것이 데이터를 다룰 때 많은 이점을 갖다 줌.
    - 커밋이란 무엇인가요?
        
        하나의 트랜잭션이 성공적으로 끝나고 DB가 일관성있는 상태일 때 이를 알려주는 연산입니다.
